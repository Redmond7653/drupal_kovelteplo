id: kt_accounts_migration
label: import all accounts from ktmodx
migration_group: default

source:
  plugin: 'csv'
  path: './baf_kt_output - ACCOUNT.csv'
  delimiter: ';'
  enclosure: '"'
  header_offset: 0
  ids:
    - code
  fields:
    0:
      name: code
      label: 'id'
    1:
      name: abonent_id
      label: 'abonent_id'
    2:
      name: custom_status
      label: 'status'
    3:
      name: short_address
      label: 'short_address'
    4:
      name: house_number
      label: 'house_number'
    5:
      name: apartment_number
      label: 'apartment_number'
    6:
      name: account_number
      label: 'account_number'
    7:
      name: owner_account_number
      label: 'owner_account_number'
    8:
      name: remains
      label: 'remains'


process:

  operation_code_field: code

  type_of_abonent_field: abonent_id

  operation_status_field: custom_status

  short_address_field: short_address

  home_number_field: house_number

  apartment_number_field: apartment_number

  account_number_field: account_number

  owner_account_number_field: owner_account_number

  remains_field: remains


destination:
  plugin: entity:account
